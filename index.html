<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" type="image/png" href="./assets/favicon-BXZRYN34.png">
	<title>墨水屏日历</title>
  <script type="module" crossorigin src="./assets/index-BqvLzgke.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/index-B_uuXZnD.css">
</head>

<body>
	<div class="main">
		<h3>墨水屏日历</h3>
		<fieldset>
			<legend>蓝牙连接</legend>
			<div class="flex-container">
				<div class="flex-group">
					<button id="connect" type="button" class="primary">连接</button>
					<button id="reconnect" type="button" class="secondary">重连</button>
					<button id="clear-log" type="button" class="secondary">清空日志</button>
				</div>
				<div class="flex-group right debug">
					<label for="epd-driver">驱动</label>
					<select id="epd-driver">
						<option value="01" data-color="blackWhiteColor" data-size="4.2_400_300">4.2寸 (黑白, UC8176)</option>
						<option value="03" data-color="threeColor" data-size="4.2_400_300">4.2寸 (三色, UC8176)</option>
						<option value="04" data-color="blackWhiteColor" data-size="4.2_400_300">4.2寸 (黑白, SSD1619)</option>
						<option value="02" data-color="threeColor" data-size="4.2_400_300">4.2寸 (三色, SSD1619)</option>
						<option value="05" data-color="fourColor" data-size="4.2_400_300">4.2寸 (四色, JD79668)</option>
						<option value="0e" data-color="threeColor" data-size="5.83_648_480">5.83寸 (三色, JD79686)</option>
						<option value="0d" data-color="fourColor" data-size="5.83_648_480">5.83寸 (四色, JD79665)</option>
						<option value="06" data-color="blackWhiteColor" data-size="7.5_800_480">7.5寸 (黑白, UC8179)</option>
						<option value="07" data-color="threeColor" data-size="7.5_800_480">7.5寸 (三色, UC8179)</option>
						<option value="0c" data-color="fourColor" data-size="7.5_800_480">7.5寸 (四色, JD79665)</option>
						<option value="08" data-color="blackWhiteColor" data-size="7.5_640_384">7.5寸低分 (黑白, UC8159)</option>
						<option value="09" data-color="threeColor" data-size="7.5_640_384">7.5寸低分 (三色, UC8159)</option>
						<option value="0a" data-color="blackWhiteColor" data-size="7.5_880_528">7.5寸HD (黑白, SSD1677)</option>
						<option value="0b" data-color="threeColor" data-size="7.5_880_528">7.5寸HD (三色, SSD1677)</option>
					</select>
				</div>
				<div class="flex-group debug">
					<label for="epd-pins">引脚</label>
					<input id="epd-pins" type="text" value="">
					<button id="set-driver" type="button" class="primary">确定</button>
				</div>
			</div>
			<div class="log-container" id="log"></div>
		</fieldset>
		<fieldset>
			<legend>设备控制</legend>
			<div class="flex-container">
				<div class="flex-group">
					<button id="calendar-mode" type="button" class="primary">日历模式</button>
					<button id="clock-mode" type="button" class="primary">时钟模式</button>
					<button id="clear-screen" type="button" class="secondary">清除屏幕</button>
				</div>
				<div class="flex-group right debug">
					<input type="text" id="cmdTXT" value="">
					<button id="send-cmd" type="button" class="primary">发送命令</button>
				</div>
			</div>
		</fieldset>
		<fieldset>
			<legend>蓝牙传图</legend>
			<div class="flex-container">
				<input type="file" id="image-file" accept=".png,.jpg,.bmp,.webp,.jpeg">
			</div>
			<div class="flex-container options">
				<div class="flex-group debug">
					<label for="canvas-size">画布尺寸:</label>
					<select id="canvas-size">
						<option value="1.54_152_152">1.54 (152x152)</option>
						<option value="1.54_200_200">1.54 (200x200)</option>
						<option value="2.13_212_104">2.13 (212x104)</option>
						<option value="2.13_250_122">2.13 (250x122)</option>
						<option value="2.66_296_152">2.66 (296x152)</option>
						<option value="2.9_296_128">2.9 (296x128)</option>
						<option value="2.9_384_168">2.9 (384x168)</option>
						<option value="3.5_384_184">3.5 (384x184)</option>
						<option value="3.7_416_240">3.7 (416x240)</option>
						<option value="3.97_800_480">3.97 (800x480)</option>
						<option value="4.2_400_300" selected>4.2 (400x300)</option>
						<option value="5.79_792_272">5.79 (792x272)</option>
						<option value="5.83_600_448">5.83 (600x448)</option>
						<option value="5.83_648_480">5.83 (648x480)</option>
						<option value="7.5_640_384">7.5 (640x384)</option>
						<option value="7.5_800_480">7.5 (800x480)</option>
						<option value="7.5_880_528">7.5 (880x528)</option>
						<option value="10.2_960_640">10.2 (960x640)</option>
						<option value="10.85_1360_480">10.85 (1360x480)</option>
						<option value="11.6_960_640">11.6 (960x640)</option>
						<option value="4E_600_400">4E (600x400)</option>
						<option value="7.3E6">7.3E6 (480x800)</option>
					</select>
				</div>
				<div class="flex-group debug">
					<label for="dither-mode">颜色模式:</label>
					<select id="dither-mode">
						<option value="blackWhiteColor">双色(黑白)</option>
						<option value="threeColor">三色(黑白红)</option>
						<option value="fourColor">四色(黑白红黄)</option>
						<option value="sixColor">六色(黑白红黄蓝绿)</option>
					</select>
				</div>
			</div>
			<div class="flex-container options">
				<div class="flex-group">
					<label for="dither-alg">抖动算法:</label>
					<select id="dither-alg">
						<option value="floydSteinberg">Floyd-Steinberg</option>
						<option value="atkinson">Atkinson</option>
						<option value="bayer">Bayer</option>
						<option value="stucki">Stucki</option>
						<option value="jarvis">Jarvis-Judice-Ninke</option>
						<option value="none">无抖动</option>
					</select>
				</div>
				<div class="flex-group">
					<label for="dither-strength">抖动强度:</label>
					<input type="range" min="0" max="5" step="0.1" value="1.0" id="dither-strength">
					<label id="dither-strength-value">1.0</label>
				</div>
			</div>
			<div class="flex-container options">
				<div class="flex-group">
					<label for="dither-brightness">亮度:</label>
					<input type="range" min="0.5" max="1.5" step="0.1" value="1.0" id="dither-brightness">
					<label id="dither-brightness-value">1.0</label>
				</div>
				<div class="flex-group">
					<label for="dither-contrast">对比度:</label>
					<input type="range" min="0.5" max="2" step="0.1" value="1.2" id="dither-contrast">
					<label id="dither-contrast-value">1.2</label>
				</div>
			</div>
			<div class="flex-container options">
				<div class="flex-group debug">
					<label for="mtu-size">MTU:</label>
					<input type="number" id="mtu-size" value="20" min="0" max="255">
					<label for="interleaved-count">确认间隔:</label>
					<input type="number" id="interleaved-count" value="50" min="0" max="500">
				</div>
			</div>
			<div class="status-bar"><b>状态：</b><span id="status"></span></div>
			<div class="flex-container">
				<div class="flex-group">
					<button id="rotate-canvas" type="button" class="secondary debug">旋转画布</button>
					<button id="clear-canvas" type="button" class="secondary">清除画布</button>
					<button id="download-array" type="button" class="secondary debug">下载数组</button>
					<button id="send-image" type="button" class="primary">发送图片</button>
				</div>
			</div>
			<div class="canvas-container">
				<div class="canvas-title"></div>
				<canvas id="canvas" width="400" height="300"></canvas>
				<div class="flex-container canvas-tools">
					<div class="flex-group tool-buttons">
						<button id="brush-mode" title="画笔" class="tool-button">✏️</button>
						<button id="eraser-mode" title="橡皮擦" class="tool-button">🧽</button>
						<button id="text-mode" title="添加文字" class="tool-button">T</button>
						<button id="tmpl-mode" title="加载模板" class="tool-button">🎨</button>
						<button id="undo-btn" title="撤销 (Ctrl+Z)" class="tool-button hide">↶</button>
						<button id="redo-btn" title="重做 (Ctrl+Y)" class="tool-button hide">↷</button>
					</div>
				</div>
				<div class="flex-container canvas-tools">
					<div class="flex-group brush-tools">
						<label for="brush-color">颜色:</label>
						<select id="brush-color">
							<option value="#000000">黑色</option>
							<option value="#FF0000">红色</option>
							<option value="#FFFF00">黄色</option>
							<option value="#00FF00">绿色</option>
							<option value="#0000FF">蓝色</option>
							<option value="#FFFFFF">白色</option>
						</select>
						<label for="brush-size">粗细:</label>
						<input type="number" id="brush-size" value="2" min="1" max="100">
					</div>
				</div>
				<div class="flex-container canvas-tools">
					<div class="flex-group text-tools">
						<label for="font-family">字体:</label>
						<select id="font-family">
							<option value="Arial" style="font-family: Arial;">Arial</option>
							<option value="sans-serif" style="font-family: sans-serif;">Sans-serif</option>
							<option value="monospace" style="font-family: monospace;">Monospace</option>
							<option value="SimSun" style="font-family: SimSun;">宋体</option>
							<option value="SimHei" style="font-family: SimHei;">黑体</option>
							<option value="Microsoft Yahei" style="font-family: 'Microsoft Yahei';">微软雅黑</option>
							<option value="Microsoft JhengHei" style="font-family: 'Microsoft JhengHei';">微软正黑体</option>
							<option value="KaiTi" style="font-family: KaiTi;">楷体</option>
							<option value="NSimSun" style="font-family: NSimSun;">新宋体</option>
							<option value="FangSong" style="font-family: FangSong;">仿宋</option>
							<option value="YouYuan" style="font-family: YouYuan;">幼圆</option>
							<option value="LiSu" style="font-family: LiSu;">隶书</option>
							<option value="STHeiti" style="font-family: STHeiti;">华文黑体</option>
							<option value="STXihei" style="font-family: STXihei;">华文细黑</option>
							<option value="STKaiti" style="font-family: STKaiti;">华文楷体</option>
							<option value="STSong" style="font-family: STSong;">华文宋体</option>
							<option value="STFangsong" style="font-family: STFangsong;">华文仿宋</option>
							<option value="STZhongsong" style="font-family: STZhongsong;">华文中宋</option>
							<option value="STHupo" style="font-family: STHupo;">华文琥珀</option>
							<option value="STXinwei" style="font-family: STXinwei;">华文新魏</option>
							<option value="STLiti" style="font-family: STLiti;">华文隶书</option>
							<option value="STXingkai" style="font-family: STXingkai;">华文行楷</option>
							<option value="FZShuTi" style="font-family: FZShuTi;">方正舒体</option>
							<option value="FZYaoti" style="font-family: FZYaoti;">方正姚体</option>
							<option value="PingFang SC" style="font-family: 'PingFang SC';">苹方</option>
							<option value="Source Han Sans CN" style="font-family: 'Source Han Sans CN';">思源黑体</option>
							<option value="Source Han Serif SC" style="font-family: 'Source Han Serif SC';">思源宋体</option>
							<option value="WenQuanYi Micro Hei" style="font-family: 'WenQuanYi Micro Hei';">文泉驿微米黑</option>
							</optgroup>
						</select>
						<label for="font-size">大小:</label>
						<input type="number" id="font-size" value="16" min="1" max="100">
					</div>
					<div class="flex-group text-tools">
						<input type="text" id="text-input" placeholder="输入文字" style="width:150px">
						<button id="text-bold" title="粗体">B</button>
						<button id="text-italic" title="斜体">I</button>
						<button id="add-text-btn" class="primary">添加文字</button>
					</div>
					<div class="flex-group crop-tools">
						<button id="crop-zoom-in" title="放大" class="secondary">+</button>
						<button id="crop-zoom-out" title="缩小" class="secondary">-</button>
						<button id="crop-move-left" title="左移">⇦</button>
						<button id="crop-move-up" title="上移">⇧</button>
						<button id="crop-move-down" title="下移">⇩</button>
						<button id="crop-move-right" title="右移">⇨</button>
						<button id="crop-finish" class="primary">完成</button>
					</div>
					<div class="flex-group tmpl-tools">
						<label for="tmpl">选择模板:</label>
						<select id="tmpl"></select>
						<button id="tmpl-render" class="primary">重新渲染</button>
					</div>
				</div>
				<div class="flex-container canvas-tools">
					<div class="flex-group tmpl-vars" id="tmpl-vars"></div>
				</div>
			</div>
		</fieldset>
		<div class="footer">
			<span class="copy">&copy; 2025 tsl0922.</span>
			<span class="links">
				<a href="https://github.com/tsl0922/EPD-nRF5">Github</a>
				<a href="https://qm.qq.com/q/SckzhfDxuu" onclick="return confirm('本群是此开源固件作者的技术交流群\n如果你购买了成品，请找卖家提供售后！')">交流群</a>
				<a href="?debug=true" id="debug-toggle">开发模式</a>
				<a href="https://thegecko.github.io/web-bluetooth-dfu" target="_blank" class="debug">DFU工具</a>
			</span>
		</div>
	</div>
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?c5949ebea1f35f725f7b05fcce462b61";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>
</body>

</html>